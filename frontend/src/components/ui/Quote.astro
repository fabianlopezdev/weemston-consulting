---
interface Props {
  text: string;
  textColor?: string;
  borderColor?: string;
  authorName?: string;
  authorPosition?: string | undefined;
  authorColor?: string;
}

const {
  text,
  textColor = 'rgb(203 213 225)',
  borderColor,
  authorName,
  authorPosition,
  authorColor,
} = Astro.props;

const cssVars = [
  textColor ? `--quote-text-color: ${textColor}` : null,
  borderColor ? `--quote-border-color: ${borderColor}` : null,
  authorColor ? `--quote-author-color: ${authorColor}` : null,
]
  .filter(Boolean)
  .join('; ');
---

<blockquote class="quote" style={cssVars}>
  <p>"{text}"</p>
  {
    authorName && (
      <footer class="quote__author">
        <span class="quote__author-name">{authorName}</span>
        {authorPosition && (
          <span class="quote__author-position">{authorPosition}</span>
        )}
      </footer>
    )
  }
</blockquote>

<style>
  .quote {
    border-left: 3px solid var(--quote-border-color);
    padding-left: var(--space-md);
    font-family: var(--font-heading);
    font-size: clamp(1.125rem, 2.5vw, 1.35rem);
    font-style: italic;
    color: var(--quote-text-color);
    line-height: 1.5;
  }

  .quote p {
    margin: 0;
  }

  .quote__author {
    display: flex;
    flex-direction: column;
    gap: var(--space-3xs, 0.125rem);
    margin-block-start: var(--space-sm);
    font-style: normal;
    font-family: var(--font-body);
    font-size: var(--font-size-sm);
    color: var(--quote-author-color, var(--quote-text-color));
  }

  .quote__author-name {
    font-weight: 600;
  }

  .quote__author-position {
    opacity: 0.7;
  }
</style>
