---
import BaseLayout from '@layouts/BaseLayout.astro';
import LayoutSwitcher from '@components/about-layouts/LayoutSwitcher.astro';
import Layout1Editorial from '@components/about-layouts/Layout1Editorial.astro';
import Layout2TwoColumn from '@components/about-layouts/Layout2TwoColumn.astro';
import Layout3Collage from '@components/about-layouts/Layout3Collage.astro';
import Layout4Timeline from '@components/about-layouts/Layout4Timeline.astro';
import Layout5Gallery from '@components/about-layouts/Layout5Gallery.astro';

// Get layout from URL param, default to 1
const url = new URL(Astro.request.url);
const layoutParam = url.searchParams.get('layout');
const currentLayout = layoutParam ? parseInt(layoutParam) : 1;

// Validate layout number (1-5)
const validLayout =
  currentLayout >= 1 && currentLayout <= 5 ? currentLayout : 1;

const layoutNames = {
  1: 'Editorial Minimal',
  2: 'Two-Column Story',
  3: 'Image Collage',
  4: 'Timeline Journey',
  5: 'Immersive Gallery',
};

const title = `About Jessica Weeman | Weemston Consulting`;
const description =
  'Meet Jessica Weeman, founder of Weemston Consulting. An operational strategist with 15+ years of experience helping organizations improve culture, optimize operations, and navigate change.';
---

<BaseLayout title={title} description={description}>
  <!-- Layout indicator for development -->
  <div class="layout-indicator">
    <span
      >Layout {validLayout}: {
        layoutNames[validLayout as keyof typeof layoutNames]
      }</span
    >
  </div>

  <!-- Render selected layout -->
  {validLayout === 1 && <Layout1Editorial />}
  {validLayout === 2 && <Layout2TwoColumn />}
  {validLayout === 3 && <Layout3Collage />}
  {validLayout === 4 && <Layout4Timeline />}
  {validLayout === 5 && <Layout5Gallery />}

  <!-- Layout Switcher -->
  <LayoutSwitcher currentLayout={validLayout} />
</BaseLayout>

<style>
  .layout-indicator {
    position: fixed;
    top: calc(var(--header-height) + var(--space-sm));
    left: var(--space-md);
    z-index: var(--z-fixed);
    background: var(--color-text);
    color: var(--color-text-contrast);
    padding: var(--space-xs) var(--space-sm);
    border-radius: var(--border-radius-full);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-medium);
    opacity: 0.9;
    pointer-events: none;
  }

  @media (max-width: 640px) {
    .layout-indicator {
      top: auto;
      bottom: calc(var(--space-lg) + 50px);
      left: var(--space-md);
    }
  }
</style>
